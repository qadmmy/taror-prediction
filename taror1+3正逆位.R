library(shiny)
library(ggplot2)
library(ggimage)

# åœ¨app.Ré¡¶éƒ¨æ·»åŠ wwwæ–‡ä»¶è·¯å¾„
addResourcePath("www", "C:/Users/26223/Documents/www")

# Tarot database
tarot_db <- list(
  # 0 æ„šè€…
  list(
    name = "0",  
    title = "æ„šè€…", 
    desc = "æ„šè€…è±¡å¾æ–°çš„å¼€å§‹ã€å†’é™©ç²¾ç¥å’Œå¯¹æœªçŸ¥çš„æ¸´æœ›ã€‚å®ƒä»£è¡¨ä¸€ç§æ— å¿§æ— è™‘çš„å¿ƒæ€ï¼Œå……æ»¡äº†å¯èƒ½æ€§å’Œæ½œåŠ›ã€‚æ„šè€…ç«™åœ¨æ‚¬å´–è¾¹ï¼Œè±¡å¾ç€ä»–å³å°†è¸ä¸Šä¸€æ®µæœªçŸ¥çš„æ—…ç¨‹ï¼Œå¸¦ç€ä¿¡å¿µå’Œå‹‡æ°”ã€‚",
    upright = "æ­£ä½çš„æ„šè€…æé†’æˆ‘ä»¬è¦å‹‡æ•¢åœ°æ‹¥æŠ±æœªçŸ¥ï¼Œæ•¢äºå†’é™©ï¼Œå°è¯•æ–°äº‹ç‰©ã€‚å®ƒè±¡å¾ç€æ–°çš„æœºä¼šå’Œæ½œåœ¨çš„æˆé•¿ã€‚",
    reversed = "é€†ä½çš„æ„šè€…æš—ç¤ºé²è½è¡Œäº‹æˆ–ç¼ºä¹è®¡åˆ’ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„é£é™©ã€‚å®ƒæé†’æˆ‘ä»¬åœ¨è¡ŒåŠ¨ä¹‹å‰è¦ä¸‰æ€è€Œåè¡Œã€‚",
    advice = list(
      å­¦ä¸š = "å­¦ä¹ ä¸­è¦æ•¢äºå°è¯•æ–°çš„æ–¹æ³•ï¼Œä¸è¦å®³æ€•å¤±è´¥ï¼Œå› ä¸ºå¤±è´¥æ˜¯å­¦ä¹ çš„ä¸€éƒ¨åˆ†ã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­ä¿æŒçœŸè¯šå’Œå¼€æ”¾çš„å¿ƒæ€ï¼Œå‹‡æ•¢è¡¨è¾¾è‡ªå·±çš„æ„Ÿå—ã€‚",
      äº‹ä¸š = "é¢å¯¹äº‹ä¸šä¸Šçš„æ–°æœºä¼šæ—¶ï¼Œè¦æœ‰å†’é™©ç²¾ç¥ï¼Œä½†ä¹Ÿè¦ç¡®ä¿æœ‰ä¸€å®šçš„è®¡åˆ’ã€‚",
      è´¢è¿ = "åœ¨æŠ•èµ„æˆ–è´¢åŠ¡å†³ç­–æ—¶ï¼Œè¦è°¨æ…è¯„ä¼°é£é™©ï¼Œé¿å…å†²åŠ¨è¡Œäº‹ã€‚"
    )
  ),
  
  # 1 é­”æœ¯å¸ˆ
  list(
    name = "1",  
    title = "é­”æœ¯å¸ˆ", 
    desc = "é­”æœ¯å¸ˆè±¡å¾åˆ›é€ åŠ›ã€è¡ŒåŠ¨åŠ›ä»¥åŠæ•´åˆèµ„æºçš„èƒ½åŠ›ã€‚ä»–æ‰‹æ¡è±¡å¾æ— é™å¯èƒ½çš„å·¥å…·ï¼Œä»£è¡¨ä»–æ‹¥æœ‰å®ç°ç›®æ ‡çš„ä¸€åˆ‡æ¡ä»¶ã€‚",
    upright = "æ­£ä½çš„é­”æœ¯å¸ˆé¢„ç¤ºç€ä½ æ‹¥æœ‰å®ç°ç›®æ ‡çš„èƒ½åŠ›ï¼Œåªè¦å–„ç”¨æ‰‹å¤´çš„èµ„æºï¼Œè¡ŒåŠ¨èµ·æ¥ï¼Œå°±èƒ½åˆ›é€ å¥‡è¿¹ã€‚",
    reversed = "é€†ä½çš„é­”æœ¯å¸ˆå¯èƒ½æš—ç¤ºèµ„æºæµªè´¹æˆ–èƒ½é‡çš„åˆ†æ•£ï¼Œæé†’æˆ‘ä»¬ä¸è¦æµªè´¹æ—¶é—´åœ¨æ— æ„ä¹‰çš„äº‹æƒ…ä¸Šã€‚",
    advice = list(
      å­¦ä¸š = "åˆ¶å®šé«˜æ•ˆçš„å­¦ä¹ è®¡åˆ’ï¼Œåˆç†åˆ†é…æ—¶é—´å’Œç²¾åŠ›ï¼Œå……åˆ†åˆ©ç”¨èµ„æºã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­ä¸»åŠ¨æ²Ÿé€šï¼Œå±•ç°ä½ çš„çœŸè¯šå’Œé­…åŠ›ã€‚",
      äº‹ä¸š = "å±•ç°ä½ çš„èƒ½åŠ›å’Œåˆ›é€ åŠ›ï¼Œå‹‡æ•¢åœ°æ‰¿æ‹…è´£ä»»ï¼Œæå‡è‡ªå·±çš„å½±å“åŠ›ã€‚",
      è´¢è¿ = "é€šè¿‡åˆç†è§„åˆ’å’Œåˆ›æ–°æ€ç»´ï¼Œå¯ä»¥å®ç°è´¢åŠ¡ä¸Šçš„çªç ´ã€‚"
    )
  ),
  
  # 2 å¥³ç¥­å¸
  list(
    name = "2",  
    title = "å¥³ç¥­å¸", 
    desc = "å¥³ç¥­å¸ä»£è¡¨å†…åœ¨çš„æ™ºæ…§ã€ç›´è§‰ä»¥åŠå¯¹ç¥ç§˜é¢†åŸŸçš„æ¢ç´¢ã€‚å¥¹è±¡å¾ç€éšè—çš„çŸ¥è¯†å’Œå¯¹å†…å¿ƒä¸–ç•Œçš„æ·±å…¥ç†è§£ã€‚",
    upright = "æ­£ä½çš„å¥³ç¥­å¸æé†’æˆ‘ä»¬å€¾å¬å†…å¿ƒçš„å£°éŸ³ï¼Œä¿¡ä»»è‡ªå·±çš„ç›´è§‰ï¼Œå¹¶æ·±å…¥æ¢ç´¢æœªçŸ¥çš„é¢†åŸŸã€‚",
    reversed = "é€†ä½çš„å¥³ç¥­å¸å¯èƒ½æš—ç¤ºå¿½è§†å†…å¿ƒçš„å£°éŸ³ï¼Œæˆ–æ˜¯è¢«å›°äºè¿·èŒ«ä¸­ï¼Œæ— æ³•åšå‡ºæ˜ç¡®çš„å†³å®šã€‚",
    advice = list(
      å­¦ä¸š = "ç›¸ä¿¡ä½ çš„ç›´è§‰ï¼Œåœ¨å­¦ä¹ ä¸­æ‰¾åˆ°é€‚åˆè‡ªå·±çš„æ–¹æ³•ï¼Œä¸è¦ç›²ç›®è·Ÿéšä»–äººã€‚",
      çˆ±æƒ… = "ä¿æŒä¸€äº›ç¥ç§˜æ„Ÿï¼Œä½†ä¹Ÿè¦å­¦ä¼šå€¾å¬å’Œç†è§£å¯¹æ–¹çš„æ„Ÿå—ã€‚",
      äº‹ä¸š = "åœ¨äº‹ä¸šä¸­ï¼Œå¬ä»å†…å¿ƒçš„æŒ‡å¼•ï¼Œæ‰¾åˆ°é€‚åˆè‡ªå·±çš„æ–¹å‘ã€‚",
      è´¢è¿ = "åœ¨æŠ•èµ„æˆ–è´¢åŠ¡å†³ç­–ä¸­ï¼Œè¦è°¨æ…è¡Œäº‹ï¼Œé¿å…è¢«è¡¨é¢çš„ä¿¡æ¯æ‰€è¿·æƒ‘ã€‚"
    )
  ),
  
  # 3 çš‡å
  list(
    name = "3",  
    title = "çš‡å", 
    desc = "çš‡åè±¡å¾ä¸°ç›ˆã€æ»‹å…»å’Œåˆ›é€ åŠ›ï¼Œå¥¹æ˜¯è‡ªç„¶çš„åŒ–èº«ï¼Œä»£è¡¨ç€ç”Ÿå‘½çš„å­•è‚²å’Œæˆé•¿ã€‚å¥¹å……æ»¡äº†çˆ±ä¸å…³æ€€ã€‚",
    upright = "æ­£ä½çš„çš‡åæé†’æˆ‘ä»¬è¦æ³¨é‡è‡ªæˆ‘ç…§é¡¾ï¼ŒåŒæ—¶ä¹Ÿè¦å…³çˆ±ä»–äººï¼Œåˆ›é€ ä¸€ä¸ªå’Œè°çš„ç¯å¢ƒã€‚",
    reversed = "é€†ä½çš„çš‡åå¯èƒ½æš—ç¤ºè¿‡åº¦ä¾èµ–ä»–äººæˆ–æ‡’æ•£çš„æ€åº¦ï¼Œæé†’æˆ‘ä»¬è¦ä¿æŒç‹¬ç«‹å’Œè‡ªå¾‹ã€‚",
    advice = list(
      å­¦ä¸š = "åœ¨å­¦ä¹ ä¸­æ³¨é‡å¹³è¡¡ï¼Œæ—¢è¦åŠªåŠ›ï¼Œä¹Ÿè¦ä¿è¯èº«å¿ƒå¥åº·ã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­åŸ¹å…»æ·±åšçš„æ„Ÿæƒ…ï¼Œæ³¨é‡ä¸ä¼´ä¾£çš„æ²Ÿé€šå’Œç†è§£ã€‚",
      äº‹ä¸š = "å±•ç°ä½ çš„é¢†å¯¼åŠ›å’Œåˆ›é€ åŠ›ï¼Œæ‰“é€ ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„å›¢é˜Ÿã€‚",
      è´¢è¿ = "åœ¨ç†è´¢æ–¹é¢è¦è°¨æ…ï¼Œä¸è¦è¿‡åº¦ä¾èµ–ä»–äººï¼Œå­¦ä¼šç‹¬ç«‹å†³ç­–ã€‚"
    )
  ),
  
  # 4 çš‡å¸
  list(
    name = "4",  
    title = "çš‡å¸", 
    desc = "çš‡å¸è±¡å¾æƒå¨ã€ç¨³å®šå’Œç§©åºã€‚ä»–æ˜¯ä¸€ä¸ªå¼ºå¤§çš„é¢†å¯¼è€…ï¼Œä»£è¡¨ç€ç†æ€§å’Œç»“æ„åŒ–çš„æ€ç»´ã€‚",
    upright = "æ­£ä½çš„çš‡å¸æé†’æˆ‘ä»¬è¦å»ºç«‹ç§©åºï¼Œä¿æŒä¸“æ³¨ï¼Œå¹¶ä»¥åšå®šçš„å†³å¿ƒå»å®ç°ç›®æ ‡ã€‚",
    reversed = "é€†ä½çš„çš‡å¸å¯èƒ½æš—ç¤ºæƒåŠ›çš„æ»¥ç”¨æˆ–è¿‡åº¦æ§åˆ¶ï¼Œæé†’æˆ‘ä»¬è¦å­¦ä¼šæ”¾æ‰‹å’Œä¿¡ä»»ä»–äººã€‚",
    advice = list(
      å­¦ä¸š = "åšå®šå†³å¿ƒï¼Œä¿æŒä¸“æ³¨ï¼Œä¸è¦è¢«å¤–ç•Œå¹²æ‰°æ‰€å½±å“ã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­ä¿æŒç†æ€§ï¼Œé¿å…è¿‡åº¦æ§åˆ¶å¯¹æ–¹ã€‚",
      äº‹ä¸š = "å±•ç°ä½ çš„é¢†å¯¼åŠ›å’Œå†³æ–­åŠ›ï¼Œå¸¦é¢†å›¢é˜Ÿèµ°å‘æˆåŠŸã€‚",
      è´¢è¿ = "åœ¨è´¢åŠ¡è§„åˆ’ä¸­ï¼Œè¦æœ‰é•¿è¿œçš„çœ¼å…‰ï¼Œåˆç†è§„åˆ’æœªæ¥ã€‚"
    )
  ),
  
  # 5 æ•™çš‡
  list(
    name = "5",  
    title = "æ•™çš‡", 
    desc = "æ•™çš‡è±¡å¾ä¼ ç»Ÿã€æ™ºæ…§å’Œç²¾ç¥ä¿¡ä»°ã€‚ä»–æ˜¯çŸ¥è¯†çš„å®ˆæŠ¤è€…ï¼Œä»£è¡¨ç€å¯¹è§„åˆ™å’Œé“å¾·çš„éµå®ˆã€‚",
    upright = "æ­£ä½çš„æ•™çš‡æé†’æˆ‘ä»¬è¦å¯»æ±‚æ™ºæ…§ï¼Œéµå¾ªä¼ ç»Ÿï¼Œå¹¶ä»ä¸­æ‰¾åˆ°å†…å¿ƒçš„å¹³é™ã€‚",
    reversed = "é€†ä½çš„æ•™çš‡å¯èƒ½æš—ç¤ºå¯¹è§„åˆ™çš„å›é€†æˆ–ç¼ºä¹ä¿¡å¿µï¼Œæé†’æˆ‘ä»¬è¦é‡æ–°å®¡è§†è‡ªå·±çš„ä»·å€¼è§‚ã€‚",
    advice = list(
      å­¦ä¸š = "å¯»æ‰¾å¯¼å¸ˆçš„æŒ‡å¯¼ï¼Œå­¦ä¹ ç»éªŒï¼Œéµå¾ªæœ‰æ•ˆçš„å­¦ä¹ æ–¹æ³•ã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­ä¿æŒçœŸè¯šä¸å¿ è¯šï¼Œå»ºç«‹ä¿¡ä»»çš„å…³ç³»ã€‚",
      äº‹ä¸š = "éµå¾ªæ—¢æœ‰è§„åˆ™ï¼ŒåŒæ—¶ä¹Ÿè¦ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œé€‚åº”å˜åŒ–ã€‚",
      è´¢è¿ = "åœ¨è´¢åŠ¡æ–¹é¢ï¼Œå®¡è§†è‡ªå·±çš„ä¿¡å¿µä¸ä»·å€¼è§‚ï¼Œé¿å…ç›²ç›®è·Ÿéšæ½®æµã€‚"
    )
  ),
  
  # 6 æ‹äºº
  list(
    name = "6",  
    title = "æ‹äºº", 
    desc = "æ‹äººè±¡å¾çˆ±æƒ…ã€é€‰æ‹©å’Œå’Œè°ã€‚å®ƒä»£è¡¨äº†äººä¸äººä¹‹é—´çš„æ·±åšè”ç³»ï¼Œä¹Ÿæš—ç¤ºç€é‡è¦çš„é€‰æ‹©ã€‚",
    upright = "æ­£ä½çš„æ‹äººæé†’æˆ‘ä»¬è¦çœŸè¯šæ²Ÿé€šï¼Œå»ºç«‹æ·±åšçš„æƒ…æ„Ÿè”ç³»ï¼ŒåŒæ—¶ä¹Ÿè¦åšå‡ºç¬¦åˆå†…å¿ƒçš„é€‰æ‹©ã€‚",
    reversed = "é€†ä½çš„æ‹äººå¯èƒ½æš—ç¤ºé”™è¯¯çš„é€‰æ‹©æˆ–æ„Ÿæƒ…ä¸­çš„ä¸å’Œè°ï¼Œæé†’æˆ‘ä»¬è¦é‡æ–°å®¡è§†å…³ç³»ã€‚",
    advice = list(
      å­¦ä¸š = "åœ¨å­¦ä¹ ä¸­é€‰æ‹©é€‚åˆè‡ªå·±çš„æ–¹å‘ï¼Œä¸è¦ç›²ç›®è·Ÿé£ã€‚",
      çˆ±æƒ… = "çœŸè¯šæ²Ÿé€šï¼Œè¡¨è¾¾è‡ªå·±çš„æ„Ÿå—ï¼Œé¿å…è¯¯è§£ã€‚",
      äº‹ä¸š = "ä¸ä»–äººåˆä½œå…±èµ¢ï¼Œå»ºç«‹å’Œè°çš„å›¢é˜Ÿå…³ç³»ã€‚",
      è´¢è¿ = "åœ¨è´¢åŠ¡å†³ç­–ä¸­è¦æ…é‡ï¼Œé¿å…æ„Ÿæƒ…ç”¨äº‹ã€‚"
    )
  ),
  
  # 7 æˆ˜è½¦
  list(
    name = "7",  
    title = "æˆ˜è½¦", 
    desc = "æˆ˜è½¦è±¡å¾è‡ªä¿¡ã€å†³å¿ƒå’Œèƒœåˆ©ã€‚å®ƒä»£è¡¨äº†å…‹æœéšœç¢å’ŒæŒæ§å±€é¢çš„èƒ½åŠ›ã€‚",
    upright = "æ­£ä½çš„æˆ˜è½¦æé†’æˆ‘ä»¬è¦åšå®šä¿¡å¿µï¼Œè¿æ¥æŒ‘æˆ˜ï¼Œæœ€ç»ˆå–å¾—èƒœåˆ©ã€‚",
    reversed = "é€†ä½çš„æˆ˜è½¦å¯èƒ½æš—ç¤ºå¤±æ§æˆ–è‡ªè´Ÿï¼Œæé†’æˆ‘ä»¬è¦è°ƒæ•´æ–¹å‘ï¼Œé‡æ–°æŒæ§å±€åŠ¿ã€‚",
    advice = list(
      å­¦ä¸š = "åšæŒç›®æ ‡ï¼Œå…‹æœå­¦ä¹ ä¸­çš„å›°éš¾ï¼Œæœ€ç»ˆä¼šå–å¾—å¥½æˆç»©ã€‚",
      çˆ±æƒ… = "åšå®šä¿¡å¿µï¼Œå‹‡æ•¢é¢å¯¹æ„Ÿæƒ…ä¸­çš„æŒ‘æˆ˜ã€‚",
      äº‹ä¸š = "å‹‡æ•¢è¿æ¥äº‹ä¸šä¸­çš„æŒ‘æˆ˜ï¼Œå±•ç°ä½ çš„é¢†å¯¼åŠ›ã€‚",
      è´¢è¿ = "åœ¨è´¢åŠ¡æ–¹é¢è¦æ³¨æ„è°ƒæ•´æ–¹å‘ï¼Œé¿å…ä¸å¿…è¦çš„æŸå¤±ã€‚"
    )
  ),
  
  # 8 åŠ›é‡
  list(
    name = "8",  
    title = "åŠ›é‡", 
    desc = "åŠ›é‡è±¡å¾å‹‡æ°”ã€è€æ€§å’Œå†…åœ¨çš„åŠ›é‡ã€‚å®ƒä»£è¡¨äº†é€šè¿‡æ¸©å’Œå’Œä¿¡å¿µæ¥å…‹æœå›°éš¾ã€‚",
    upright = "æ­£ä½çš„åŠ›é‡æé†’æˆ‘ä»¬è¦æŒæ§å†…å¿ƒçš„ææƒ§ï¼Œå±•ç°è€å¿ƒå’Œçˆ±å¿ƒï¼Œæœ€ç»ˆä¼šè·å¾—æˆåŠŸã€‚",
    reversed = "é€†ä½çš„åŠ›é‡å¯èƒ½æš—ç¤ºææƒ§å’Œç„¦è™‘ï¼Œæé†’æˆ‘ä»¬è¦é‡æ–°æ‰¾å›å†…å¿ƒçš„åŠ›é‡ã€‚",
    advice = list(
      å­¦ä¸š = "åšæŒåˆ°åº•ï¼Œä¸è¦å› ä¸ºä¸€æ—¶çš„æŒ«æŠ˜è€Œæ”¾å¼ƒã€‚",
      çˆ±æƒ… = "å±•ç°è€å¿ƒå’Œçˆ±å¿ƒï¼Œä¸ä¼´ä¾£å…±åŒé¢å¯¹é—®é¢˜ã€‚",
      äº‹ä¸š = "å……æ»¡ä¿¡å¿ƒï¼Œå‹‡æ•¢é¢å¯¹å·¥ä½œä¸­çš„æŒ‘æˆ˜ã€‚",
      è´¢è¿ = "ä¿æŒå†·é™ï¼Œç†æ€§é¢å¯¹è´¢åŠ¡ä¸Šçš„é—®é¢˜ã€‚"
    )
  ),
  # 9 éšå£«
  list(
    name = "9",  
    title = "éšå£«", 
    desc = "éšå£«è±¡å¾ç‹¬ç«‹ã€æ·±æ€å’Œæ™ºæ…§ã€‚ä»–ä»£è¡¨äº†ä¸€ç§å†…å‘çš„åŠ›é‡ï¼Œæé†’æˆ‘ä»¬é€šè¿‡å†…çœå’Œç‹¬å¤„æ¥å¯»æ‰¾ç­”æ¡ˆã€‚",
    upright = "æ­£ä½çš„éšå£«æé†’æˆ‘ä»¬è¦è‡ªæˆ‘åæ€ï¼Œè¿œç¦»å¤–ç•Œå¹²æ‰°ï¼Œæ‰¾åˆ°å†…å¿ƒçš„å¹³é™å’Œæ™ºæ…§ã€‚",
    reversed = "é€†ä½çš„éšå£«å¯èƒ½æš—ç¤ºå­¤ç«‹æˆ–é€ƒé¿ç°å®ï¼Œæé†’æˆ‘ä»¬ä¸è¦è¿‡åº¦å°é—­è‡ªå·±ã€‚",
    advice = list(
      å­¦ä¸š = "ç‹¬ç«‹æ€è€ƒï¼Œä¸è¦è¢«å¤–ç•Œçš„å£°éŸ³å¹²æ‰°ï¼Œæ‰¾åˆ°é€‚åˆè‡ªå·±çš„å­¦ä¹ æ–¹å¼ã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­éœ€è¦ä¸€äº›ç‹¬ç«‹çš„ç©ºé—´ï¼Œé‡æ–°å®¡è§†è‡ªå·±å†…å¿ƒçš„éœ€æ±‚ã€‚",
      äº‹ä¸š = "ä¿æŒå†·é™ï¼Œç‹¬ç«‹åˆ†æé—®é¢˜ï¼Œæ‰¾åˆ°æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚",
      è´¢è¿ = "åœ¨è´¢åŠ¡æ–¹é¢è¦è°¨æ…è¡Œäº‹ï¼Œé¿å…ç›²ç›®è·Ÿéšä»–äººçš„å»ºè®®ã€‚"
    )
  ),
  
  # 10 å‘½è¿ä¹‹è½®
  list(
    name = "10",  
    title = "å‘½è¿ä¹‹è½®", 
    desc = "å‘½è¿ä¹‹è½®è±¡å¾ç€å‘½è¿çš„è½¬æŠ˜å’Œå˜åŒ–ã€‚å®ƒä»£è¡¨äº†äººç”Ÿçš„å¾ªç¯ï¼Œæé†’æˆ‘ä»¬è¦æ¥å—å˜åŒ–å¹¶é¡ºåŠ¿è€Œä¸ºã€‚",
    upright = "æ­£ä½çš„å‘½è¿ä¹‹è½®é¢„ç¤ºå¥½è¿çš„åˆ°æ¥ï¼Œæé†’æˆ‘ä»¬æŠ“ä½æœºä¼šï¼Œè¿æ¥äººç”Ÿçš„è½¬æŠ˜ç‚¹ã€‚",
    reversed = "é€†ä½çš„å‘½è¿ä¹‹è½®å¯èƒ½æš—ç¤ºåœæ»æˆ–å¤±æ§ï¼Œæé†’æˆ‘ä»¬è¦ä¿æŒçµæ´»æ€§ï¼Œé€‚åº”å˜åŒ–ã€‚",
    advice = list(
      å­¦ä¸š = "é¡ºåŠ¿è€Œä¸ºï¼Œæ¥å—å­¦ä¹ ä¸­çš„å˜åŒ–ï¼Œæ‰¾åˆ°æ–°çš„å­¦ä¹ æ–¹æ³•ã€‚",
      çˆ±æƒ… = "åœ¨æ„Ÿæƒ…ä¸­å­¦ä¼šé€‚åº”å˜åŒ–ï¼Œçµæ´»åº”å¯¹æ–°çš„æŒ‘æˆ˜ã€‚",
      äº‹ä¸š = "äº‹ä¸šä¸­å¯èƒ½ä¼šé¢ä¸´ä¸€äº›å˜åŒ–ï¼Œè¦ä¿æŒå¼€æ”¾çš„å¿ƒæ€ã€‚",
      è´¢è¿ = "è´¢åŠ¡æ–¹é¢çš„å˜åŒ–å¯èƒ½å¸¦æ¥æ–°çš„æœºä¼šï¼Œè¦æŠ“ä½æ—¶æœºã€‚"
    )
  ),
  
  # 11 æ­£ä¹‰
  list(
    name = "11",  
    title = "æ­£ä¹‰", 
    desc = "æ­£ä¹‰è±¡å¾å…¬å¹³ã€å¹³è¡¡å’Œè´£ä»»ã€‚å®ƒæé†’æˆ‘ä»¬è¦ä»¥ç†æ€§å’Œå…¬æ­£çš„æ€åº¦å¯¹å¾…ç”Ÿæ´»ä¸­çš„é—®é¢˜ã€‚",
    upright = "æ­£ä½çš„æ­£ä¹‰æé†’æˆ‘ä»¬è¦ä¿æŒç†æ€§ï¼Œåšå‡ºå…¬æ­£çš„åˆ¤æ–­ï¼Œå¹¶æ‰¿æ‹…è‡ªå·±çš„è´£ä»»ã€‚",
    reversed = "é€†ä½çš„æ­£ä¹‰å¯èƒ½æš—ç¤ºåè§æˆ–ä¸å…¬ï¼Œæé†’æˆ‘ä»¬è¦é‡æ–°å®¡è§†è‡ªå·±çš„è¡Œä¸ºå’Œå†³å®šã€‚",
    advice = list(
      å­¦ä¸š = "åœ¨å­¦ä¹ ä¸­ä¿æŒå…¬å¹³ä¸å…¬æ­£ï¼Œä¸è¦è¯•å›¾æŠ•æœºå–å·§ã€‚",
      çˆ±æƒ… = "ç†æ€§å¤„ç†æ„Ÿæƒ…é—®é¢˜ï¼Œé¿å…å› æƒ…ç»ªåŒ–è€Œåšå‡ºé”™è¯¯çš„å†³å®šã€‚",
      äº‹ä¸š = "åœ¨å·¥ä½œä¸­åšåˆ°å…¬æ­£ä¸è¯šä¿¡ï¼Œèµ¢å¾—ä»–äººçš„ä¿¡ä»»ã€‚",
      è´¢è¿ = "å®¡è§†è‡ªå·±çš„è´¢åŠ¡çŠ¶å†µï¼Œç¡®ä¿é€æ˜å’Œåˆæ³•ã€‚"
    )
  ),
  
  # 12 å€’åŠäºº
  list(
    name = "12",  
    title = "å€’åŠäºº", 
    desc = "å€’åŠäººè±¡å¾æ”¾å¼ƒã€è½¬å˜å’Œç‰ºç‰²ã€‚ä»–æé†’æˆ‘ä»¬è¦ä»ä¸åŒçš„è§’åº¦çœ‹å¾…é—®é¢˜ï¼Œæ¥å—å¿…è¦çš„ç‰ºç‰²ä»¥è·å¾—æˆé•¿ã€‚",
    upright = "æ­£ä½çš„å€’åŠäººæé†’æˆ‘ä»¬è¦æ”¾ä¸‹æ‰§å¿µï¼Œæ¥å—æ”¹å˜ï¼Œå¹¶ä»ä¸­è·å¾—æ–°çš„å¯ç¤ºã€‚",
    reversed = "é€†ä½çš„å€’åŠäººå¯èƒ½æš—ç¤ºå›ºæ‰§æˆ–æ‹–å»¶ï¼Œæé†’æˆ‘ä»¬è¦æ‰“ç ´åƒµå±€ï¼Œé‡‡å–è¡ŒåŠ¨ã€‚",
    advice = list(
      å­¦ä¸š = "ä¸è¦å®³æ€•æ”¹å˜å­¦ä¹ æ–¹æ³•ï¼Œå°è¯•æ–°çš„å­¦ä¹ ç­–ç•¥ã€‚",
      çˆ±æƒ… = "æ„Ÿæƒ…ä¸­éœ€è¦å¦¥åä¸è®©æ­¥ï¼Œæ‰èƒ½ç»´æŒå…³ç³»çš„å¹³è¡¡ã€‚",
      äº‹ä¸š = "ä»ä¸åŒçš„è§†è§’çœ‹å¾…é—®é¢˜ï¼Œæ‰¾åˆ°æ–°çš„è§£å†³æ–¹æ¡ˆã€‚",
      è´¢è¿ = "æš‚åœä¸å¿…è¦çš„è¡ŒåŠ¨ï¼Œé‡æ–°å®¡è§†è´¢åŠ¡ç›®æ ‡ã€‚"
    )
  ),
  
  # 13 æ­»ç¥
  list(
    name = "13",  
    title = "æ­»ç¥", 
    desc = "æ­»ç¥è±¡å¾ç»“æŸã€å˜é©å’Œæ–°ç”Ÿã€‚å®ƒå¹¶ä¸ä»£è¡¨æ­»äº¡ï¼Œè€Œæ˜¯æé†’æˆ‘ä»¬æ¥å—æ—§äº‹ç‰©çš„ç»“æŸï¼Œä¸ºæ–°çš„å¼€å§‹åšå¥½å‡†å¤‡ã€‚",
    upright = "æ­£ä½çš„æ­»ç¥æé†’æˆ‘ä»¬è¦æ¥å—å˜åŒ–ï¼Œæ”¾ä¸‹è¿‡å»ï¼Œä»¥è¿æ¥æ–°çš„æœºä¼šã€‚",
    reversed = "é€†ä½çš„æ­»ç¥å¯èƒ½æš—ç¤ºå¯¹æ”¹å˜çš„æŠ—æ‹’ï¼Œæé†’æˆ‘ä»¬è¦å‹‡æ•¢é¢å¯¹ä¸å¯é¿å…çš„è½¬å˜ã€‚",
    advice = list(
      å­¦ä¸š = "ç»“æŸæ—§æœ‰çš„å­¦ä¹ æ¨¡å¼ï¼Œæ¥å—æ–°çš„å­¦ä¹ æŒ‘æˆ˜ã€‚",
      çˆ±æƒ… = "æ”¾ä¸‹è¿‡å»çš„æ„Ÿæƒ…ï¼Œæ‰èƒ½è¿æ¥æ–°çš„çˆ±æƒ…ã€‚",
      äº‹ä¸š = "è½¬å˜å’Œæ”¹å˜å¯èƒ½ä¼šå¸¦æ¥æ–°çš„æœºé‡ï¼Œå‹‡æ•¢é¢å¯¹ã€‚",
      è´¢è¿ = "æ¥å—è´¢åŠ¡ä¸Šçš„å˜åŒ–ï¼Œé€‚åº”æ–°çš„ç¯å¢ƒã€‚"
    )
  ),
  
  # 14 èŠ‚åˆ¶
  list(
    name = "14",  
    title = "èŠ‚åˆ¶", 
    desc = "èŠ‚åˆ¶è±¡å¾å¹³è¡¡ã€è°ƒå’Œå’Œé€‚åº¦ã€‚å®ƒæé†’æˆ‘ä»¬è¦åœ¨ç”Ÿæ´»ä¸­æ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Œé¿å…èµ°å‘æç«¯ã€‚",
    upright = "æ­£ä½çš„èŠ‚åˆ¶æé†’æˆ‘ä»¬è¦ä¿æŒå’Œè°ï¼Œæ§åˆ¶æƒ…ç»ªï¼Œåšå‡ºæ˜æ™ºçš„é€‰æ‹©ã€‚",
    reversed = "é€†ä½çš„èŠ‚åˆ¶å¯èƒ½æš—ç¤ºå¤±è¡¡æˆ–æç«¯è¡Œä¸ºï¼Œæé†’æˆ‘ä»¬è¦é‡æ–°è°ƒæ•´è‡ªå·±çš„çŠ¶æ€ã€‚",
    advice = list(
      å­¦ä¸š = "åœ¨å­¦ä¹ ä¸­æ³¨é‡å¹³è¡¡ï¼Œåˆç†å®‰æ’æ—¶é—´ï¼Œé¿å…è¿‡åº¦åŠ³ç´¯ã€‚",
      çˆ±æƒ… = "ä¿æŒå’Œè°å’Œç†è§£ï¼Œä¸ä¼´ä¾£å…±åŒé¢å¯¹é—®é¢˜ã€‚",
      äº‹ä¸š = "åœ¨å·¥ä½œä¸­æ‰¾åˆ°å¹³è¡¡ç‚¹ï¼Œé¿å…è¿‡åº¦æŠ•å…¥æˆ–å¿½è§†å…¶ä»–æ–¹é¢ã€‚",
      è´¢è¿ = "é¿å…å†²åŠ¨æ¶ˆè´¹ï¼Œç†æ€§ç®¡ç†è´¢åŠ¡ã€‚"
    )
  ),
  
  # 15 é­”é¬¼
  list(
    name = "15",  
    title = "é­”é¬¼", 
    desc = "é­”é¬¼è±¡å¾è¯±æƒ‘ã€æŸç¼šå’Œç‰©è´¨æ¬²æœ›ã€‚å®ƒæé†’æˆ‘ä»¬è¦è­¦æƒ•è¢«è´Ÿé¢æƒ…ç»ªæˆ–ç‰©è´¨æ‰€æ§åˆ¶ã€‚",
    upright = "æ­£ä½çš„é­”é¬¼æé†’æˆ‘ä»¬è¦æ‘†è„±æŸç¼šï¼Œé‡æ–°æŒæ§è‡ªå·±çš„ç”Ÿæ´»ã€‚",
    reversed = "é€†ä½çš„é­”é¬¼å¯èƒ½æš—ç¤ºè§£è„±å’Œè‡ªç”±ï¼Œæé†’æˆ‘ä»¬è¦çªç ´å†…å¿ƒçš„é™åˆ¶ã€‚",
    advice = list(
      å­¦ä¸š = "è­¦æƒ•åˆ†å¿ƒä¸è¯±æƒ‘ï¼Œä¸“æ³¨äºçœŸæ­£é‡è¦çš„äº‹æƒ…ã€‚",
      çˆ±æƒ… = "é¿å…æ²‰æººäºä¸å¥åº·çš„å…³ç³»ï¼Œå­¦ä¼šä¿æŠ¤è‡ªå·±ã€‚",
      äº‹ä¸š = "ä¸è¦è¢«ç‰©è´¨è¯±æƒ‘æ‰€å›°ï¼Œä¿æŒæ¸…é†’çš„å¤´è„‘ã€‚",
      è´¢è¿ = "å®¡è§†è‡ªå·±çš„æ¶ˆè´¹è¡Œä¸ºï¼Œé¿å…é™·å…¥å€ºåŠ¡æˆ–è¿‡åº¦æ¶ˆè´¹ã€‚"
    )
  ),
  
  # 16 å¡”
  list(
    name = "16",  
    title = "å¡”", 
    desc = "å¡”è±¡å¾çªå¦‚å…¶æ¥çš„æ”¹å˜ä¸æ¯ç­ã€‚å®ƒæé†’æˆ‘ä»¬è¦æ¥å—å˜åŒ–ï¼Œæ¸…ç†æ—§æœ‰çš„ä¸ç¨³å®šç»“æ„ã€‚",
    upright = "æ­£ä½çš„å¡”æé†’æˆ‘ä»¬è¦ç›´é¢æŒ‘æˆ˜ï¼Œå‹‡äºæ¥å—æ”¹å˜ï¼Œå¹¶ä»ä¸­é‡å»ºæ–°çš„ç§©åºã€‚",
    reversed = "é€†ä½çš„å¡”å¯èƒ½æš—ç¤ºé¿å…å½»åº•å´©æºƒï¼Œæé†’æˆ‘ä»¬è¦æå‰é¢„é˜²å±æœºã€‚",
    advice = list(
      å­¦ä¸š = "é¢å¯¹å­¦ä¹ ä¸­çš„æŒ‘æˆ˜ï¼Œå‹‡æ•¢æ¥å—æ”¹å˜ï¼Œæ‰¾åˆ°æ–°çš„æ–¹å‘ã€‚",
      çˆ±æƒ… = "ç ´é™¤æ—§æœ‰æŸç¼šï¼Œé‡å»ºæ–°çš„æ„Ÿæƒ…åŸºç¡€ã€‚",
      äº‹ä¸š = "å‡†å¤‡å¥½è¿æ¥çªå‘æƒ…å†µï¼Œä¿æŒçµæ´»åº”å¯¹ã€‚",
      è´¢è¿ = "å®¡æ…åº”å¯¹ç»æµåŠ¨è¡ï¼Œåšå¥½é£é™©ç®¡ç†ã€‚"
    )
  ),
  
  # 17 æ˜Ÿæ˜Ÿ
  list(
    name = "17",  
    title = "æ˜Ÿæ˜Ÿ", 
    desc = "æ˜Ÿæ˜Ÿè±¡å¾å¸Œæœ›ã€çµæ„Ÿä¸ç¥ç¦ã€‚å®ƒä»£è¡¨äº†å…‰æ˜çš„æœªæ¥å’Œå¯¹æ¢¦æƒ³çš„è¿½æ±‚ã€‚",
    upright = "æ­£ä½çš„æ˜Ÿæ˜Ÿæé†’æˆ‘ä»¬è¦ä¿æŒä¹è§‚ï¼Œå±•ç°åˆ›é€ åŠ›ï¼Œå¹¶ç›¸ä¿¡æœªæ¥ä¼šæ›´å¥½ã€‚",
    reversed = "é€†ä½çš„æ˜Ÿæ˜Ÿå¯èƒ½æš—ç¤ºå¤±æœ›æˆ–å¹»ç­ï¼Œæé†’æˆ‘ä»¬è¦é‡æ–°ç‚¹ç‡ƒå¸Œæœ›ã€‚",
    advice = list(
      å­¦ä¸š = "ä¿æŒä¹è§‚ï¼Œå±•ç°åˆ›é€ åŠ›ï¼Œæ‰¾åˆ°å­¦ä¹ ä¸­çš„ä¹è¶£ã€‚",
      çˆ±æƒ… = "ä¿¡ä»»ä½ çš„ç›´è§‰å’Œå¸Œæœ›ï¼Œæ„Ÿæƒ…ä¼šè¿æ¥æ–°çš„è½¬æœºã€‚",
      äº‹ä¸š = "ä½ æ­£èµ°åœ¨æ­£ç¡®çš„é“è·¯ä¸Šï¼ŒåšæŒä¸‹å»ã€‚",
      è´¢è¿ = "ä¿æŒä¹è§‚ï¼Œæœºé‡å°±åœ¨çœ¼å‰ï¼Œä¸è¦è½»æ˜“æ”¾å¼ƒã€‚"
    )
  ),
  
  # 18 æœˆäº®
  list(
    name = "18",  
    title = "æœˆäº®", 
    desc = "æœˆäº®è±¡å¾è¿·æƒ‘ã€ç›´è§‰å’Œæ½œæ„è¯†ã€‚å®ƒæé†’æˆ‘ä»¬è¦å€¾å¬å†…å¿ƒçš„å£°éŸ³ï¼Œè­¦æƒ•æ½œè—çš„é£é™©ã€‚",
    upright = "æ­£ä½çš„æœˆäº®æé†’æˆ‘ä»¬è¦å€¾å¬å†…å¿ƒï¼Œä¿¡ä»»ç›´è§‰ï¼Œå¹¶è­¦æƒ•è¿·æƒ‘ã€‚",
    reversed = "é€†ä½çš„æœˆäº®å¯èƒ½æš—ç¤ºå›°æƒ‘æˆ–ä¸ç¡®å®šï¼Œæé†’æˆ‘ä»¬è¦ç†æ¸…æ€è·¯ã€‚",
    advice = list(
      å­¦ä¸š = "ä¿æŒè­¦è§‰ï¼Œä¸è¦è¢«å›°æƒ‘è¿·å¤±æ–¹å‘ã€‚",
      çˆ±æƒ… = "ç›´è§‰æ˜¯ä½ æœ€å¥½çš„æŒ‡å¼•ï¼Œä¿¡ä»»è‡ªå·±çš„æ„Ÿå—ã€‚",
      äº‹ä¸š = "è­¦æƒ•æ½œè—çš„é£é™©ï¼Œé¿å…è¢«è¡¨è±¡æ‰€è¿·æƒ‘ã€‚",
      è´¢è¿ = "é¿å…è¿‡åº¦å†’é™©ï¼Œç†æ€§ç®¡ç†è´¢åŠ¡ã€‚"
    )
  ),
  
  # 19 å¤ªé˜³
  list(
    name = "19",  
    title = "å¤ªé˜³", 
    desc = "å¤ªé˜³è±¡å¾æˆåŠŸã€å–œæ‚¦å’Œæ¸…æ™°ã€‚å®ƒä»£è¡¨äº†å…‰æ˜ã€å¹¸ç¦å’Œæˆå°±ã€‚",
    upright = "æ­£ä½çš„å¤ªé˜³æé†’æˆ‘ä»¬è¦å‹‡æ•¢è¡¨ç°è‡ªå·±ï¼Œè¿æ¥æˆåŠŸå’Œå¹¸ç¦ã€‚",
    reversed = "é€†ä½çš„å¤ªé˜³å¯èƒ½æš—ç¤ºè™šä¼ªæˆ–è¯¯å¯¼ï¼Œæé†’æˆ‘ä»¬è¦ä¿æŒçœŸå®ã€‚",
    advice = list(
      å­¦ä¸š = "å‹‡æ•¢è¡¨ç°è‡ªå·±ï¼Œå­¦ä¹ ä¸­ä¼šè¿æ¥æˆåŠŸã€‚",
      çˆ±æƒ… = "çœŸè¯šç›¸å¾…ï¼Œæ„Ÿæƒ…ä¼šèµ°å‘å¹¸ç¦ã€‚",
      äº‹ä¸š = "æˆåŠŸæ˜¯ä½ çš„ç›®æ ‡ï¼Œç»§ç»­åŠªåŠ›ã€‚",
      è´¢è¿ = "è´¢å¯Œåˆ°æ¥ï¼Œäº«å—æˆæœï¼Œä½†ä¸è¦å¿˜è®°è§„åˆ’æœªæ¥ã€‚"
    )
  ),
  
  # 20 å®¡åˆ¤
  list(
    name = "20",  
    title = "å®¡åˆ¤", 
    desc = "å®¡åˆ¤è±¡å¾è§‰é†’ã€å®¡è§†å’Œé‡ç”Ÿã€‚å®ƒæé†’æˆ‘ä»¬è¦é‡æ–°å®¡è§†è‡ªå·±çš„ç”Ÿæ´»ï¼Œè¿æ¥æ–°çš„å¼€å§‹ã€‚",
    upright = "æ­£ä½çš„å®¡åˆ¤æé†’æˆ‘ä»¬è¦è§‰é†’å¹¶æ¥å—æ”¹å˜ï¼Œèµ°å‘æ–°çš„é˜¶æ®µã€‚",
    reversed = "é€†ä½çš„å®¡åˆ¤å¯èƒ½æš—ç¤ºæ‹’ç»æ”¹å˜æˆ–é€ƒé¿è´£ä»»ï¼Œæé†’æˆ‘ä»¬è¦ç›´é¢ç°å®ã€‚",
    advice = list(
      å­¦ä¸š = "æ˜¯æ—¶å€™å®¡è§†ä½ çš„å­¦ä¹ æ–¹å¼ï¼Œæ‰¾åˆ°æ›´æœ‰æ•ˆçš„é€”å¾„ã€‚",
      çˆ±æƒ… = "é‡æ–°å®¡è§†ä½ ä¸ä¼´ä¾£çš„å…³ç³»ï¼Œæ‰¾åˆ°é—®é¢˜çš„æ ¹æºã€‚",
      äº‹ä¸š = "å‡†å¤‡è¿æ¥é‡ç”Ÿä¸çªç ´ï¼Œå‹‡æ•¢è¿½æ±‚æ–°çš„æœºä¼šã€‚",
      è´¢è¿ = "å…³æ³¨è´¢åŠ¡çŠ¶å†µï¼Œåšå‡ºå¿…è¦çš„è°ƒæ•´ã€‚"
    )
  ),
  
  # 21 ä¸–ç•Œ
  list(
    name = "21",  
    title = "ä¸–ç•Œ", 
    desc = "ä¸–ç•Œè±¡å¾åœ†æ»¡ã€å®Œæˆä¸æˆå°±ã€‚å®ƒä»£è¡¨äº†ä¸€ä¸ªé˜¶æ®µçš„ç»“æŸå’Œæ–°çš„å¼€å§‹ã€‚",
    upright = "æ­£ä½çš„ä¸–ç•Œæé†’æˆ‘ä»¬è¦åº†ç¥æˆåŠŸï¼ŒåŒæ—¶ä¸ºæ–°çš„ç›®æ ‡åšå¥½å‡†å¤‡ã€‚",
    reversed = "é€†ä½çš„ä¸–ç•Œå¯èƒ½æš—ç¤ºåœæ»æˆ–æœªå®Œæˆï¼Œæé†’æˆ‘ä»¬è¦åšæŒåˆ°åº•ã€‚",
    advice = list(
      å­¦ä¸š = "ä½ æ­£æ¥è¿‘æˆåŠŸï¼Œç»§ç»­åŠªåŠ›ï¼Œå®Œæˆæœ€åçš„ç›®æ ‡ã€‚",
      çˆ±æƒ… = "æ„Ÿæƒ…ä¼šèµ°å‘ç¨³å®šä¸åœ†æ»¡ï¼Œçæƒœç°åœ¨çš„å¹¸ç¦ã€‚",
      äº‹ä¸š = "è¾¾æˆç›®æ ‡åï¼Œå‘æ›´é«˜çš„å±‚æ¬¡è¿ˆè¿›ã€‚",
      è´¢è¿ = "äº«å—æˆåŠŸçš„å›æŠ¥ï¼ŒåŒæ—¶ç»§ç»­ä¿æŒè‰¯å¥½çš„è§„åˆ’ã€‚"
    )
  )
)

# å¡”ç½—ç‰Œæ•°æ®åº“å’Œå›¾ç‰‡è·¯å¾„é…ç½®
tarot_dir <- "C:/Users/26223/Documents/www/taror"
tarot_images <- c(sapply(0:21, function(i) {
  sprintf("%s/%02d_%s.jpg", tarot_dir, i, tarot_db[[i + 1]]$title)
}), back = paste0(tarot_dir, "/back.jpg"))

# UIç•Œé¢
ui <- fluidPage(
  tags$style(HTML("
    .main-container { 
      background: linear-gradient(to bottom, #2c3e50, #3498db) !important;
      height: 100vh;
      padding: 20px;
      color: white;
    }
    .card-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }
   .tarot-card {
  width: 120px;  /* å¡ç‰Œå®¹å™¨å®½åº¦ */
  height: auto;  /* é«˜åº¦è‡ªé€‚åº” */
  cursor: pointer;
  transition: transform 0.3s;
  border-radius: 10px;
  overflow: hidden;
  position: relative;
  aspect-ratio: 3 / 5; /* è®¾ç½®å®½é«˜æ¯”ä¸º3:5 */
}

.tarot-card:hover {
  transform: translateY(-5px);
}

.card-label {
  position: absolute;
  bottom: 5px; /* æ ‡ç­¾åœ¨å›¾ç‰‡åº•éƒ¨ */
  left: 50%;
  transform: translateX(-50%);
  color: white;
  font-weight: bold;
  font-size: 14px;
  text-shadow: 1px 1px 2px black; /* æ·»åŠ é˜´å½± */
  background: rgba(0, 0, 0, 0.7); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
  padding: 5px 10px;
  border-radius: 5px;
  z-index: 10; /* ç¡®ä¿æ ‡ç­¾åœ¨å›¾ç‰‡ä¸Šæ–¹ */
}
  ")),
  
  # æ·»åŠ èƒŒæ™¯éŸ³ä¹
  tags$audio(
    src = "www/Sarah_Brightman.mp3",
    type = "audio/mp3",
    autoplay = TRUE,
    loop = TRUE,
    controls = TRUE,
    style = "display:none;"
  ),
  
  div(class = "main-container",
      fluidRow(
        column(8,
               div(class = "card-grid",
                   lapply(1:22, function(i) {
                     div(class = "tarot-card",
                         style = "position: relative;",
                         div(style = "position: absolute; width: 100%; height: 100%;",
                             imageOutput(paste0("card", i), click = paste0("card_click", i)),
                             uiOutput(paste0("card_label", i))  # åŠ¨æ€æ ‡ç­¾
                         )
                     )
                   })
               )
        ),
        column(4,
               selectInput("mode", "é€‰æ‹©é¢„æµ‹æ¨¡å¼:", 
                           choices = c("ä¸‰å¼ å¡”ç½—é¢„æµ‹", "æ¯æ—¥å¡”ç½—é¢„æµ‹")),
               selectInput("question", "é€‰æ‹©è¯¢é—®äº‹é¡¹:", 
                           choices = c("å­¦ä¸š", "çˆ±æƒ…", "äº‹ä¸š", "è´¢è¿")),
               uiOutput("suggestions")
        )
      )
  )
)

server <- function(input, output, session) {
  # éšæœºæ‰“ä¹±å¡ç‰Œé¡ºåº
  random_order <- sample(1:22)
  selected <- reactiveVal(character(0))
  orientations <- reactiveVal(list())  # ç”¨äºå­˜å‚¨æ­£é€†ä½
  
  # ç”Ÿæˆå¡ç‰Œå›¾ç‰‡å’Œæ ‡ç­¾
  lapply(1:22, function(i) {
    # ä¿®æ”¹å›¾ç‰‡æ˜¾ç¤ºæ ·å¼
    output[[paste0("card", i)]] <- renderImage({
      card_id <- as.character(random_order[i])
      is_selected <- card_id %in% selected()
      orientation <- orientations()[[card_id]]  # è·å–æ­£é€†ä½ä¿¡æ¯
      
      # å›¾ç‰‡è·¯å¾„å’Œæ—‹è½¬è§’åº¦
      img_src <- if (is_selected) tarot_images[random_order[i]] else tarot_images["back"]
      rotation <- if (is_selected && orientation == "é€†ä½") "rotate(180deg)" else "none"
      
      list(
        src = img_src,
        contentType = "image/jpeg",
        style = paste0("width: 100%; height: auto; transform:", rotation, "; object-fit: contain;")  # ç¡®ä¿æ¯”ä¾‹æ­£ç¡®
      )
    }, deleteFile = FALSE)
    
    # ä¿®æ”¹æ­£é€†ä½å’Œåç§°æ˜¾ç¤ºæ ·å¼
    output[[paste0("card_label", i)]] <- renderUI({
      card_id <- as.character(random_order[i])
      if (card_id %in% selected()) {
        card <- tarot_db[[as.numeric(card_id)]]
        orientation <- orientations()[[card_id]]
        div(class = "card-label", paste0(card$title, " (", orientation, ")"))
      } else {
        NULL
      }
    })
  })
  
  # ç‚¹å‡»äº‹ä»¶å¤„ç†
  lapply(1:22, function(i) {
    observeEvent(input[[paste0("card_click", i)]], {
      card_id <- as.character(random_order[i])
      if (input$mode == "ä¸‰å¼ å¡”ç½—é¢„æµ‹") {
        current <- selected()
        if (!card_id %in% current) {
          if (length(current) < 3) {
            # éšæœºç”Ÿæˆæ­£é€†ä½
            orientation <- ifelse(runif(1) > 0.5, "æ­£ä½", "é€†ä½")
            orientations(modifyList(orientations(), setNames(list(orientation), card_id)))
            selected(c(current, card_id))
          }
        }
      } else if (input$mode == "æ¯æ—¥å¡”ç½—é¢„æµ‹") {
        if (length(selected()) == 0) {
          # éšæœºç”Ÿæˆæ­£é€†ä½
          orientation <- ifelse(runif(1) > 0.5, "æ­£ä½", "é€†ä½")
          orientations(modifyList(orientations(), setNames(list(orientation), card_id)))
          selected(card_id)
        }
      }
    })
  })
  
  # æ˜¾ç¤ºå»ºè®®
  output$suggestions <- renderUI({
    if (input$mode == "ä¸‰å¼ å¡”ç½—é¢„æµ‹") {
      if (length(selected()) == 3) {
        cards <- lapply(selected(), function(card_id) {
          card <- tarot_db[[as.numeric(card_id)]]
          orientation <- orientations()[[card_id]]
          
          div(style = "margin-bottom: 20px;",
              h4(paste(card$title, orientation)),
              p(strong("è§£é‡Š: "), card$desc),
              p(strong("å»ºè®®: "), card$advice[[input$question]])
          )
        })
        
        tagList(
          h3("ğŸ”® æŠ½ç‰Œç»“æœ:"),
          cards,
          actionButton("reset", "é‡æ–°æŠ½ç‰Œ", class = "btn-warning")
        )
      } else {
        h4("è¯·é€‰æ‹©3å¼ å¡”ç½—ç‰Œ...")
      }
    } else if (input$mode == "æ¯æ—¥å¡”ç½—é¢„æµ‹") {
      if (length(selected()) == 1) {
        card <- tarot_db[[as.numeric(selected())]]
        orientation <- orientations()[[selected()]]
        
        tagList(
          h3("ğŸ”® æ¯æ—¥å¡”ç½—é¢„æµ‹:"),
          div(style = "margin-bottom: 20px;",
              h4(paste(card$title, orientation)),
              p(strong("è§£é‡Š: "), card$desc),
              p(strong("å­¦ä¸šå»ºè®®: "), card$advice$å­¦ä¸š),
              p(strong("çˆ±æƒ…å»ºè®®: "), card$advice$çˆ±æƒ…),
              p(strong("äº‹ä¸šå»ºè®®: "), card$advice$äº‹ä¸š),
              p(strong("è´¢è¿å»ºè®®: "), card$advice$è´¢è¿)
          ),
          actionButton("reset", "é‡æ–°æŠ½ç‰Œ", class = "btn-warning")
        )
      } else {
        h4("è¯·é€‰æ‹©1å¼ å¡”ç½—ç‰Œ...")
      }
    }
  })
  
  # é‡ç½®åŠŸèƒ½
  observeEvent(input$reset, {
    selected(character(0))
    orientations(list())
  })
}

shinyApp(ui, server)